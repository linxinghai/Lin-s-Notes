# 数据恢复技术

## 类型

### 入门与进阶知识 

记录数据的方式 

认识硬盘 

硬盘结构 

基本工具 



### 分区

1. 磁盘类型 

GPT 

前言 

EFI 

特点 

创建GPT分区 

ESP 

MSR 

LDM元数据及数据分区 

OEM 结构 

保护MBR 

与MBR结构的主引导扇区结构一致 

GPT头 0x50 分区表项数 0x48 GPT分区表起始扇区号 0x54 每个分区表项的字节数 分区表 分区区域 分区表备份 GPT表备份 

2. shujuchonxian 概述 分区与卷 分区 卷 Unix下卷的使用 扇区地址 物理地址 物理卷地址 逻辑卷的地址 根据合理性判断分区信息的正确性 首尾相连 分区间存在未分配空间 分区交叉 分区包含 DOS分区
主引导扇区MBR 

引导代码 

磁盘签名 

分区表(最多4个表项) 

可引导标志 分区起始CHS地址 起始磁头 起始扇区 起始柱面 分区类型 FAT NTFS Ext Linux 分区结束CHS地址 结束磁头 结束扇区 结束柱面 分区起始LBA地址 分区大小扇区数 有效标志(55AA) 扩展引导记录扇区EBR 保留 分区表(最多4个表项) 可引导标志 分区起始CHS地址 起始磁头 起始扇区 起始柱面 

分区类型 FAT NTFS Ext Linux 分区结束CHS地址 结束磁头 结束扇区 结束柱面 分区起始LBA地址 分区大小扇区数 有效标志(55AA) 

Apple分区 Appl磁盘分区 布局 45 52 ER 每扇区字节 本磁盘扇区数 分区表项数据结构 分区表分区的分区表项 50 4D PM 保留 分区数 分区起始扇区号 分区大小扇区数 分区名 分区类型 文件系统分区的分区表项 BSD分区 BSD分区 Free BSD分区 片 分区 Free BSD对分区的命名 NetBSD与OpenBSD分区 OpenBSD命名规则 磁盘标签数据结构 57 45 56 82 WEV 驱动器类型 驱动器图表类型 驱动器类型名 标识符名 每扇区大小字节数 每磁道扇区数 每柱面磁道数 每单元柱面 每柱面扇区数 每单元扇区数 每磁道空闲扇区数 每柱面空闲扇区数 每单元备用柱面数 磁盘转速 扇区插入页 磁道倾斜 柱面倾斜 磁头转换微秒数 道至道微秒数 标志 驱动器详细信息 保留 57 45 56 82 检验和 分区表可容纳表项个数 引导区域大小字节数 文件系统引导超级块最大大小 BSD分区#1 …….. BSD分区#16 BSD分区表项的数据结构 BSD分区大小扇区 BSD分区起始扇区号 文件系统片段大小字节数 文件系统类型 每块片段数 每组柱面数 Sun Solaris分区 概念 Sparc分区的Sun Solaris分区 总体布局 磁盘标签 引导代码 分区 磁盘标签 Sparc磁盘标签数据结构 ASCII标签 …… Sparc VTOC …… 0x105 跳过扇区,写 跳过扇区,读|| 保留 ……. |磁盘速度 物理柱面数|| 每柱面备用 保|留 插入页 数据柱面数 备用柱面数| 磁头数 每磁道扇区数|| 保留| 1#分区磁盘图 ………….. || 8#分区磁盘图 | 签名值(DABE) 校验和 VOTC 版本 卷名 分区数 1#分区类型 1#分区标志 2#分区类型 ……. 8#分区标志 引导信息 保留 签名值(600DDEEE) 保留 1#分区时间戳 ……. 8#分区时间戳 共2行 分区标志与类型共2行 分区类型 磁盘图 起始柱面号 大小扇区数 i386平台下的Sun Solaris分区 总体布局 Solaris启动分区 Solaris文件系统分区 磁盘标签 分区 磁盘标签 引导信息 签名值(EE DE 0D 60) 版本 卷名 每扇区大小 分区数 保留 1#分区 …… 16#分区表 时间戳 卷标签 磁盘详细信息 签名值(BE DA) 校验和 分区表项结构 分区类型 标志 起始扇区号 分区大小扇区数 GPT分区 概述 磁盘总体布局 保护MBR EFI信息(GPT头) 分区表 Microsoft保留分区(34号扇区) 基本数据分区 剩余扇区 32个扇区(分区表备份) EFI信息备份 EFI部分 数据结构 EFI信息扇区数据结构 45 46 49 20 50 41 52 54 EFI PARRT ||版本号 GPT头大小字节数 GPT校验和 保留|| 当前GPT头的LBA扇区号 GPT头备份位置的LBA扇区号 GPT分区区域起始LBA扇区 GPT分区结束LBA扇区 磁盘GUID 磁盘GUID GPT分区表起始LBA扇区 分区表项数 每分区表项占用字节数 分区表校验和 保留 GPT分区表数据结构 分区类型GUID 分区唯一GUID 分区起始LBA 分区结束LBA 分区属性 分区Unicode码 总结 

移动介质分区 软盘 U盘 ZIP盘 闪存卡 光盘 

### [病毒](https://blog.csdn.net/cxu123321/article/details/106681871)

#### 引导型病毒 

#### 文件病毒 

##### 
com 

exe 

#####
寄生病毒 

无入口病毒 

覆盖病毒 

伴随病毒 

链接病毒 

#####
系统病毒 

蠕虫病毒 

木马病毒 

脚本病毒 

宏病毒 

后门病毒 

病毒种植程序病毒 

破坏性程序病毒 

玩笑病毒 

捆绑机病毒 


#### 网络病毒 



### [文件级](https://mark0.net/index-e.html)

1. 文件类型 

文档 

OLE 

doc 固定表头 文件的唯一标识 文件格式修订号 文件格式版本号 字节顺序规律标识 复合文件中的sectors的大小 short-sectors的大小 notused 用于存放扇区配置表(SAT)的扇区总数 目录流的第一个扇区的SID 入口名字 区域大小 入口类型 入口颜色 左节点did 右节点did 成员红黑树根节点did 唯一标识符 用户标记 创建入口时间标记 最后修改入口时间标记 流入口 流大小 notused notused 标准流的最小大小 短扇区配置表(SSAT)的第一扇区 SSAT的扇区总数 主扇区配置表(MSAT)的第一个扇区的sid 主扇区配置表的扇区总数 存放主扇区配置表MSAT的第一部分(一般包含109个sid) xls PPT 复合文件 仓库storage 流streams 扇区链sectors chain SID chain end of chain sid(-2) 

数据扇区sectors 

OXF 

docx 修改文件属性为ZIP 

打开ZIP文件找到word文件夹中document.xml文件,拖出修改文件后缀为HTML 修改后用网页打开即可展出内容,复制转出即可 xlsx 修改文件属性为ZIP 

打开ZIP文件找到XL文件夹中sharedStrings.xml文件,拖出修改文件后缀为HTML 

修改后用网页打开即可展出内容,复制转出即可 pptx 修改文件属性为ZIP 打开ZIP文件 找到media文件夹中存放图片文件 找到slides文件夹中slidesX.xml文件,拖出修改文件后缀为HTML 修改后用网页打开即可展出内容,复制转出即可
pdf 文件头 对象集合 文件数据 xref表 文件尾 层级结构 trailer 文件头 catalog 目录对象 

子主题 pages root outline root page outline entry (bookmark) rtf 

图片 

.jpg或.jpeg JPEG的段结构 段结构 SOI文件头 APP0图像识别信息 DQT定义量化表 SOF0图像基本信息 DHT定义Huffman表 SOS扫描行开始 EOI文件尾 其他 DRI定义重新开始间隔 COM注释 JPEG压缩编码实例 子主题 8*8红色色块编码 8*8黑色色块编码 量化表 亮度量化表 色差量化表 DC差值码表 亮度AC码表 色差AC码表 bmp 整体信息 文件头 bfType bfSize bfOffBit 位图信息头 信息头大小 图像的宽度 图像的高度 颜色平面数 像素位数 图像压缩类型 位图数据的大小 水平分辨率 垂直分辨率 颜色索引数 biclrused biclrmportant 调色板 位图数据 RowSize = 4 * \[BPP * Width/32\] 其他 

png 文件结构 文件署名域 数据块 长度 数据块类型码 数据码实际内容 循环冗余检测 关键数据块 文件头数据块(IHDR) 图像宽度 图像长度 图像深度 颜色类型 压缩方法 滤波器方法 隔行扫描方法 调色板数据块(PLTE) 图像数据块(IDAT) 图像结束数据块(IEND) cHRM 基色和白色点数据块 gAMA 图像γ数据块 sBIT 样本有效位数据块 PLTE 调色板数据块 bKGD 背景颜色数据块 hIST 图像直方图数据块 tRNS 图像透明数据块 oFFs (专用公共数据块) pHYs 物理像素尺寸数据块 sCAL (专用公共数据块) IDAT 图像数据块 tIME 图像最后修改时间数据块 tEXt 文本信息数据块 zTXt 压缩文本数据块 fRAc (专用公共数据块) gIFg (专用公共数据块) gIFt (专用公共数据块) gIFx (专用公共数据块) IEND 图像结束数据 辅助数据块 数据块摘要 文件头数据块 基色和白色点数据块(cHRM) 图像y数据块(gAMA) 样本有效位数据块(sBIT) 调色板数据块(plte) 背景颜色数据块(BKGD) 

gif 文件结构 构件详解 GIF文件头 GIF数据流 逻辑屏幕描述块 逻辑屏幕宽度 逻辑屏幕高度 m cr s pixel 背景色 像素宽高比 调色板数据区 全局彩色表 图像描述块 图像标识符 标志位 x方向的偏移量 y方向的偏移量 图像宽度 图像高度 m i s r pixel 局部彩色表 图像数据区 表基图像数据 图形控制扩展块 扩展块标识 图形控制扩展标签 块大小 保留 处置方法 i t 延迟时间 透明色索引 块终结器 无格式文本扩展块 注释扩展块 扩展块标识 注释块标签 注释块 块终结器 应用扩展块 GIF文件结束块 速差表 视频 

mp3 MP4 avi 应用 exe MZ‘EXE文件标记 文件长度除512的余数 商 重定位项的个数 文件头除16的商 程序运行所需最小段 数 堆栈段的段值 (SS) 文件校验和 ip cs 

apk 压缩 zip 分文件头信息 分文件头信息标志 压缩所需版本 通用比特标志位 压缩方式 文件最后修改时间 文件最后修改日期 32位校验码 压缩文件大小 未压缩文件大小 文件名长 扩展段长 文件名 扩展段 文件压缩数据 中心目录 中心文件头信息标志 主机操作系统 解压缩所需版本 通用比特标志 压缩方式 文件最后修改时间 文件最后修改日期 32位校验码 压缩文件大小 未压缩文件大小 文件名长 扩展段长 文件注释长 磁盘起始号 内部文件属性 外部文件属性 分文件头相对位移 文件名 扩展段 文件注释 中心目录记录结束符 中心目录标记结束符 磁盘号 磁盘中心目录起始号 磁盘中心目录入口总数 中心目录入口总数 整个中心目录大小 关于起始磁盘号的中心目录初始偏移 zip文件注释长度 zip文件注释 

rar 

RAR 4.x 压缩文件头 标记块 头部校验和 块类型 块标记 块大小 crc校验码 头类型 位标记 文件大小 保留字节 文件头 头校验和 块类型 位标记 文件头大小 已压缩文件大小 未压缩文件大小 操作系统 文件的CRC值 日期与时间 解压文件的最低RAR版本 压缩方式 文件名大小 文件属性 文件名 文件内容 结尾块 头部校验和 块类型 位标记 块大小 

RAR 5.0 一般档案结构 通用块 头校验和 块大小 块类型 头标志 扩展段大小 文件大小 扩展段 文件 一般扩展段格式 段大小 段类型 数据 一般档案布局 存档块 自由取模块 RAR5.0签名 档案加密头 主档案头 头校验和 块大小 块类型 块标志 扩展大小 存档标志 体积数 扩展大小 0A 03 文件头和服务头 档案头结束 文件头 档案加密块 crc32 头大小 头类型 头flag 扩展区大小 归档flag 扩展区 主档案块 文件块和服务块 服务块 存档注释头 快速开启头 头检验和 结构大小 flag 偏移量 数据大小 数据 文件加密记录 记录大小 记录类型 版本 flag KDF数 散列 头crc32 头大小 头类型 头flag 扩展区大小 数据段大小 文件flag 未解压大小 属性 数据crc 压缩信息 操作系统 文件名长度 文件名称 扩展区 文件内容 rar结尾 基于CUDA的RAR5格式文件密码恢复研究 

7z 
2. 文件属性 文件类型 - d 用户 用户组 其他用户 rwx属性 
3. 编码 


### 磁盘逻辑级

-  分区系统 

	1. Windows 

		- Fat 

		self 硬盘结构 保留区 引导区（boot） MBR（一般不会用到） 主引导记录， 占446字节, 为计算机启动后从可启动介质上首先装入内存并且执行的代码， 通常用来解释分区结构 DBR DOS引导记录， 为操作系统进入文件系统以后可以访问的第一个扇区， 通常用来解释文件系统，DBR是由硬盘的MBR装载的程序段。 DBR装入内存后，即开始执行该引导程序段，其主要功能是完成操作系统的自举并将控制权交给操作系统。 每个分区都有引导扇区，但只有被设为活动分区才会被MBR装的DBR入内存运行 一般用于定位FAT表 EBR（一般不一定会用到） 扩展分区引导记录， 类似于主引导记录MBR.因为MBR四条分区信息的限制,可以使用EBR方便扩展. 它的结构与MBR类似,但是没有引导程序和磁盘签名, 仅仅保留了分区表和结束标志 标识符 0x55AA 

		文件分配表区（FAT） FAT1 FAT2 一般互为备份，记录存储文件名与文件所在簇号 数据区 空闲 DBR 记录文件系统相关参数 0x000x02：3字节，

		跳转指令，一般为EB5890 0x030x0A：8字节，文件系统标志和版本号 0x0B0x0C：2字节，每扇区字节数 0x0D0x0D：1字节，每簇扇区数 0x0E0x0F：2字节，保留扇区数 0x100x10：1字节，FAT表个数 0x110x12：2字节，FAT32必须等于0，FAT12/FAT16为根目录中目录的个数 0x130x14：2字节，FAT32必须等于0，FAT12/FAT16为扇区总数 0x200x23：4字节，文件系统总扇区数 0x240x27：4字节，每个FAT表占用扇区数 0x2C0x2F：4字节，根目录所在第一个簇的簇号 0x1FE0x1FF：签名标志“55 AA” FSINFO 用以记录文件系统中空闲簇的数量以及下一可用簇的簇号等信息，以供操作系统作为参考。 FSINFO信息扇区一般位于文件系统的1号扇区，结构非常简单。 0x2000x203：4个字节，扩展引导标志“0x52526141” 0x3E40x3E7：4个字节，FSINFO签名“0x72724161” 0x3E80x3EB：4个字节，文件系统的空簇数 0x3EC0x3EF：4个字节，下一可用簇号 fat表 FAT1 标签F8 FF FF 0F FAT2 FAT1的备份区 数据区 根目录项 子目录项 目录项 文件数据 相关补充 常见于U盘，硬盘等容量不大的储存器 

		shujucxian 
		
			文件系统总论 
			
			文件系统概述 
			
			文件系统整体布局 
			
			分配策略 文件的建立与删除 


		- exFAT 
		分区结构 DBR 备份 FAT 簇位图 大写字符 根目录 数据区 DBR 标识符 代号 EB5290 保留 四行全零 BPB参数 40 隐含扇区数 5c 分区内总簇数 48 分区总扇区数 60 根目录首簇号 50 FAT表起始扇区数 64 卷序列号 54 FAT表扇区数 6c 每扇区字节数描述2^x 58 首簇起始扇区号 6d 每簇扇区数描述 引导代码 结束标记 55AA FAT 簇位图 根目录 00 目录项类型 14 起始簇号 18 文件大小 

- NTFS
	- 文件名用unicode编码

		$boot  $mftmirr $mft 根目录    备份 
	- 结构 VBR BOOT 引导文件 BPB MFT 所有文件可由该文件单位 MFMIrr MFT前四个表的备份 文件 空闲 BBR 属性列表 属性项结构 属性头 （此处所涉及偏移为相对属性头的偏移） 00-03 属性类型 04-07 属性总字节数 08 0常驻属性 1非常驻属性 09 属性名长 0A 属性名的起始偏移 10-13 属性体的字节数 14-15 属性体偏移的字节数 18- 属性体的内容 以下为非常驻属性 10-17 属性体的起始虚拟簇号 一定是00 18-1F 属性头的结束虚拟簇号 20-21 簇流运行的偏移地址

28-2F 属性体占用的总空间（字节数） 30-37 属性体实际占用的字节数 38-3F 属性体的初识大小 一般这三者视为一致 40- 簇流记录信息 属性体 10属性 标准属性 文件传统属性 18-1F 文件创建时间 20-27 最后修改时间 指向该文件的目录数 20属性 属性列表 30属性 文件名属性 40 文件名的长度 41 文件名的命名方式 00 POSIX 01 win32 02 dos 03 win32dos 42- 文件名（unicode编码） 80属性 $DATA 文件数据属性（常驻） 数据过长通过簇流跳转其他簇中记录 90属性 索引根属性 属性头 子主题 索引根 子主题 索引头 子主题 索引项 00-03 文件的MFT参考号 A0属性 索引分配树节点 索引头 索引项 B0属性 $BITMAP MFT文件和索引的位图 元文件 $MFT 以FILE开头（46494C45） MFT项占用1024个字节，即两个扇区 所有文件都有一个MFT项记录数据 最后两个字节为修正值且与更新序列号相同 如果不同则将FILE修改为BAAD $MFTMirr 元文件的镜像 $LogFile 日志文件 $Volume 卷文件 $AttrDef 属性定义列表文件 $ROOT 根目录 $bitmap 位图 $Boot 引导文件 $BadClus 坏簇 $Secure 安全文件 $UpCase 大小写转换表 $Extend metadata directory 扩展元数据目录 $reparse 重解析点文件 $usnjrnl 变更日志文件 $quota 配额管理文件 $objid 对象id 元文件结构 记录项 记录头 00-03 签名46494C45，明文FILE 04-05 更新序列号的偏移 06-07 更新序列号的个数 14-15 第一个属性的偏移地址 16-17 0 删除的文件 1 正常的文件 2 删除的目录 3 正常的目录 2C-2F MFT项的索引号 30-31 更新序列号 32-35 更新数组 
- UNIX Solaris Sparc Solaris 分区结构 磁盘标签 引导程序 系统切片 swap切片 用户数据切片 x86 Solaris free BSD open BSD UFS1 块分类 引导块 超级块 i-节点 数据块 柱面组 0号柱面组 引导块 超级块 柱面描述符 i-节点 数据块 1号柱面组 数据块 超级块 柱面描述符 i-节点 数据块 2号柱面组 数据块 超级块 柱面描述符 i-节点 数据块 UFS2 超级块 柱面组摘要 柱面组描述符 引导代码 freebsd Sparc Solaris i-节点 UFS1 UFS2 扩展 目录项 分配策略 文件的建立与删除 
- apple APM HFS+ 系统整体布局 保留 MDB HFS卷分配块 起始扇区 HFS+卷起始位置 HFS+卷 MDB备份 最后一个 扇区保留 HFS卷 
- Linux ExtX 文件系统概述 整体布局 超级块 块组描述符表和块组描述符 块位图 i- 节点位图 i- 节点表与i- 节点 扩展属性 目录项 链接和挂载点 Hash树 文件系统日志 分配策略 文件的建立与删除 总结 Ext3 引导区 一般为两空扇区 超级块 块大小 每组块数 每块节点数 节点字节数 块描述符表 块组表 i-节点表 i-节点 数据 Ext4 
- 提取文件 Windows Fat32 Exfat NTFS Unix UFS Linux EXT3 方法2 大文件提取 注意 通过日志恢复 RAID Apple HFS+ 
- 概括 
	- window系统下
		0b-0c为扇区大小
		0d为每簇大小
		0e-0f为隐藏扇区
		
		exfat稍有不同
		6c 为扇区大小
		6d 为每簇大小
		40 隐藏扇区
		- fat32 根目录(0e-0f)+(10)*(04-07)
					文件 (2$4-2$4)*256+(2$a-2$b)
					将上值-(2c-2f)再*0d
					开始于计算结果结束语
					(2$c-2$f)字节
		ntfs  (08-0b)*0d
				80属性 簇流 大小 位置
		
		exfat (80-83)+(84-87)+512
				c0下(2$5-4)*扇区大小(一般256)
				位图是2号簇
		
		ext
		
		hfs 编录文件*8
			索引节点向下16扇区
			头节点




### 硬盘物理级
>若磁盘有物理损伤则无法恢复
>物理损坏还可分为

1. 开盘
>真空环境
 
更换磁头 -> 切忌开屏蔽罩时要果断以免永磁体与盘体接触 
更换主轴电机 -> 取磁盘前可用直尺靠在磁盘边用铅笔用个定位点 用于复位时使用 
取磁盘 -> 用笔顶在电机上将磁盘倒出来 

2. 组成 
硬盘 电路板 数据转换器 接口 缓存 磁头臂 磁头 主轴电机 永磁铁 音圈马达 盘片 空气过滤片 固件 U盘 硬盘物理故障的种类及判定 外部故障 供电故障 常见故障 接口故障 常见故障 缓存故障 常见故障 BIOS故障 电机驱动芯片故障 常见故障 内部故障 磁头组件故障 磁头芯片 前置信号处理器 音圈电机 磁头 定位卡子 主轴电机故障 盘片故障 划伤 坏扇区 检验错误 IDNF错误 AMNF错误 坏块标记错误 固件故障 硬盘电路板故障数据恢复方法 维修 替换 硬盘磁头组件故障数据恢复方法 磁头组件恢复思路 开盘 盘片数据获取 物理镜像 数据提取 硬盘主轴电机故障数据恢复方法 硬盘盘片故障数据恢复 固件 u盘 故障 故障修复 补焊 替换晶振 替换主控芯片 替换闪存芯片 pc3000修复闪存


### 服务器

1. RAID 
	- 条卷带 
	- 镜像条带 
	- 海明码校验 
	- 带 
	- RAID级别 
		RAID0 
		RAID1 
		RAID2 
		RAID3 
		RAID5 
		RAID6 
		RAID7 
		RAID1E 
		RAID5E 
		RAID5EE 
		RAID DP 
2. 基本概念 
	- 块
	>由于阵列中
	>数据并不是直接存储在一个中
	>而是每个盘中存一点片段
	>而这一片段的大小称为块大小<br>
	>块大小总是2的整数次幂<br>
	>起始块为0号块
		
	- 条带 
	>各个磁盘内编号相同的快组成的扇区段称为条带<br>
	>条带号与你组成的块号相同	
3. 提前工作 
	- 连接
	- 故障检测 
	- 镜像 
	- 新鲜度 
	- 软件 
4. 系统 
	- Windows 
	- Linux 
	- Unix 
	- apple 
5. 实践 

## 故障分析
1. 分区丢失 
	1. 分区的标识符被改写
2. 通过bitmap计算总扇区
	1. 搜索555AA
		或者46494C45
		或者DBR向下偏移786,432*8扇区
		等方法定位到$MFT
		向下
		6(bitmap是第6个元文件)*2(每个元文件共1024个字节=2sec) = 12扇区
		
		$bitmap元文件
		80属性的0x38记录分区的簇使用情况
		0x38-0x3B(分区簇的使用情况) * 8(每字节描述簇数) * 8(每簇扇区数) 
2. 通过日志文件恢复数据 
	1. (文件过大删除后其$MFT项也会被删除)
		定位到$logfile元文件
		
		向下搜索
		1.搜索文本功能
		文件名的Unicode编码
		或者
		文件中非中文的名称
		如文件格式
		2.同步搜索(高级版)
		文件名称的部分即可
		
		向上5行 0x08 文件$MFT位置
		
		
		之后记录的80属性中记录着簇流
		(日志中的簇流并不会因为删除的文件过大而删除)
3. 格式化 
	- 同种格式格式化 
		- 一般这种情况会出现目录被破坏的现象
	- 异种格式格式化 
		- 有概率导致文件被覆盖
			比如fat32的数据区与ntfs的$mft
			比如ntfs的数据区域fat32的fat表与目录
4. 无法打开 
	- 磁盘 
		- DBR损坏

			EB58XX
			55AA
			等标记错误
	- 文件 
		- 文件头异常
	- 手工恢复DBR 
		- 大小
5. 提取文件 
	- 文件乱码 
	- 文件加密 
		旋转 
			文件中的00和ff不变,
			但其他数值发生变化,应该不是逐个修改,
			可能是旋转加密<br>
			如果大面积相同数值旋转后会出现条状的
			且有规律
			数条相同的数据条
			例如
			46 8C 19 32 64 C8 91 23 || 46 8C 19 32 64 C8 91 23<br>
			其原数据为23
			(七次翻转一个周期)
		字节换位 
		非 
		异或 
		二次 
			add + xor
			xor + add<br>
			原数据 add ?= 现数据 xor
		三次加密 
			二次加密 + 旋转
6. 删除恢复 
	1. 目录损坏 
		- 删除损坏
		- 删除标记
	2. 目录恢复
		1. 利用文件系统的目录项结构
			预先制作文件的目录
			(无法恢复文件名)
			一般这种情况出现在fat32文件中
7. 文件碎片化 片段间隔



## 目录

目录 故障判断 数据恢复协议 硬盘故障的基本判断流程 判断硬盘电路板好坏的流程 

MHDD详细介绍 软故障的恢复 绝对虚拟磁盘工具InsPro的使用 P-STUDIO的详细使用技巧 DiskGenius的详细使用技巧 

软件级实例 PC-3000 简介 用PC-3000修复迈拓硬盘 用PC-3000修复西部数据硬盘 用PC-3000修复希捷硬盘 PC-3000 DE工具的讲解 西部数据硬盘专修工具（WDR）介绍 开盘数据恢复 什么情况下需要开盘数据恢复 如何判断磁头损坏 敲盘的原因 磁头卡死的原因及处理方法 磁头匹配技巧 开盘数据恢复流程 数据恢复软件讲解 数据恢复软件MTL讲解 数据恢复软件HDClone的讲解 HDClone的详细操作流程 使用HDClone的数据恢复实例 WinHex十六进制编辑器的讲解 菜单详细介绍 使WinHex的数据恢复实例 

## 相关基础知识点

 相关基础知识点 磁盘 是指利用磁记录技术存储数据的存储器 分区 介绍 是物理磁盘的一部分，其作用如同一个物理分隔单元。 

分类 分区通常指主分区或扩展分区。 

主分区 是标记为由操作系统使用的一部分物理磁盘。 一个磁盘最多可有4个主分区（或者如果有1个扩展分区，则最多有3个主分区）。 

拓展分区 是从硬盘的可用空间上创建的分区，而且可以将其再划分为逻辑驱动器； 创建扩展分区不需要有主分区。新硬盘买来后都必须分区才能使用。 

簇 最小的存储单位 即一组连续扇区的总和 簇流 存放数据的区域 簇流运行 记录簇流在文件系统具体位置的代码 

例子 32 C0 02 00 00 0C 大小 起始簇 结构 第一个数值的高4位：簇流大小后面的数值（簇流的起始簇号） 

第一个数值的低4位：对应后面几个数值（簇流大小） 

注意 若簇流运行后紧跟00则簇流已结束 下一个簇流的起始簇号为相对起始簇号 如下个簇流的簇号为负数则表示在该簇流前
磁道 当磁盘旋转时，磁头若保持在一个位置上， 则每个磁头都会在磁盘表面划出一个圆形轨迹，这些圆形轨迹就叫做磁道 柱面 在有多个盘片构成的盘组中，由不同盘片的面， 但处于同一半径圆的多个磁道组成的一个圆柱面 扇区 磁盘上的每个磁道被等分为若干个弧段，这些弧段便是硬盘的扇区。 硬盘的第一个扇区，叫做引导扇区。 元数据文件 用于管理用户数据的文件 红黑树

## 恢复流程

- 准备阶段 
	- 注意 
	- 检测磁盘 
		- 用MHDD检测磁盘 检测磁盘的恢复 步骤1 加载SCSI驱动 步骤2 选择操作磁盘 步骤3 按F4,即可弹出设置对话框 start LBA起始扇区 End LBA结束扇区 通常对磁盘检测时需要对全盘进行检测,因此不需要改动 步骤4 再次按F4键即可对磁盘进行扫描 步骤5 检测完毕后,MHDD会发出“滴滴”报警声,提醒检测人员已经检测完毕 检测过程中,也可以随时按esc键中止检测 检测磁盘的目的 磁盘能否正常识别 磁盘坏道量及坏道位置 磁头健康情况 是否固件损坏 磁盘是否加密或剪切 
		- 用MHDD清除主引导扇区“55AA”标志 原因 需要恢复的数据的硬盘可能存在病毒 重要位置处于坏扇区 硬盘逻辑参数矛盾 清除方法 步骤1 记录MHDD程序并选择要操作的磁盘,然后在程序界面中输入命令swichmbr然后enter 清除“Y”,否则“N” 步骤2 按“Y”后程序执行清除操作,清除成功会显示“Done” 表示操作完成 
		- 用PC-3000检测磁盘 
			步骤1 连接设备然后给硬盘加电 如果过程中硬盘有异响请及时停止加电 硬盘自检过后界面的“DRD”与“DSC”常亮 其他指示灯熄灭表示磁盘就绪 
			
			步骤2 通过Universal Utilities->Universal PC-3000 AT Utility 进入通用检测模块 否则,应该根据不同指示灯所代表的含义寻求其他解决方法 
			
			步骤3 进入通用模块后 选择Tests->Express test菜单命令 调出磁盘检测起始位置和结束位置对话框 
			
			如果需要,可以对磁盘检测起始位置和结束位置进行相应的设置 但通常我们需要对整个磁盘进行检测,所以直接单击“ok”即可
			步骤4 单击“Ok”后扫描过程中 PC-3000的色块表示 无法读取的扇区数量值检测图表右上角的“errors”中给出 同时在左侧也以示意图的形式给出了各种色块状态扇区的数量 检测过程中,可以快进或者暂停检测 暂停状态下也可以通过人为控制逐步检测 每单击一次检测256个扇区 
			
			步骤5 磁盘检测完毕后,即可根据色块数量情况得出磁盘的健康状况 检测过程中,随时可按暂停或者esc终止检测 
	- 坏道处理 
		- 步骤1 
		- 步骤2 
		- 步骤3 
		- 步骤4 
			- 修复过程中,随时可以按Ctrl+Break键中止当前修复进程,再次按“Y”键确认后,程序即退出 
	- 镜像磁盘 
	- 分区及格式化对磁盘的写入 
- 恢复阶段 
	- 分区恢复 
	- DBR损坏后的恢复 
	- 格式化恢复 
	- 删除恢复 
	- 软件使用 
- RAID恢复

## 培训

多分区修复 
fat32 
ntfs 
exfat 
Linux 
hfs+
### 文件 
jpg 
bmp 
doc 
ppt 
zip 
pdf 
xls 
### 病毒
加密

